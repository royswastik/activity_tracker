// Uncomment for testing in browser
// var runData = [
//     [-2.2947540283203125, 5.4524993896484375, 8.610244750976563, -2.6281890869140625, 3.2558135986328125, 8.472946166992188, -4.27569580078125, 0.5491790771484375, 7.80609130859375, -1.1179656982421875, 0.431488037109375, 8.904434204101563, 1.76519775390625, 0.11767578125, 5.158294677734375, 7.2765350341796875, 9.826263427734375, 18.181533813476563, 8.82598876953125, 10.395050048828125, 10.179306030273438, -5.1386871337890625, -10.355819702148438, -9.865493774414063, 15.965225219726563, -2.90277099609375, -0.6472320556640625, 17.7696533203125, 20.770477294921875, 9.532058715820313],
//     [4.922943115234375, -10.846160888671875, -4.1187896728515625, 14.12158203125, 8.080673217773438, -2.0594024658203125, 10.453887939453125, 30.753646850585938, 8.3748779296875, 7.609954833984375, 12.807479858398438, -0.4707183837890625, 2.45166015625, -10.31658935546875, -0.3334197998046875, 10.25775146484375, -0.9022064208984375, -4.1384124755859375, 12.042572021484375, 24.987350463867188, 8.669082641601563, 6.1585693359375, 22.319931030273438, 8.355270385742188, 12.434829711914063, 12.670196533203125, 1.333709716796875, 3.393096923828125, -8.82598876953125, -3.6873016357421875],
//     [5.158294677734375, -3.8246002197265625, -1.7259674072265625, 8.296432495117188, 16.887054443359375, 3.7657470703125, 0.7256927490234375, 22.006118774414063, 4.8248748779296875, 8.963272094726563, 15.180694580078125, 3.7461395263671875, 12.787872314453125, -6.0408935546875, -0.68646240234375, 5.5897979736328125, 2.9420013427734375, -2.9420013427734375, 6.060516357421875, 22.182647705078125, 4.471832275390625, -0.137298583984375, 20.005569458007813, 1.70635986328125, 8.394485473632813, 7.4138336181640625, -2.3143768310546875, 5.668243408203125, -8.4925537109375, 0.823760986328125],
//     [1.5298309326171875, -7.256927490234375, -5.17791748046875, 7.3942108154296875, 0.5883941650390625, -1.6671295166015625, 10.434280395507813, 10.002777099609375, -1.1375732421875, 3.5107879638671875, 21.515792846679688, 4.530670166015625, 4.8837127685546875, 19.887893676757813, -0.823760986328125, 16.651687622070313, 15.94561767578125, 3.216583251953125, 4.5699005126953125, -10.042007446289063, -1.274871826171875, 4.648345947265625, -10.846160888671875, -1.4317779541015625, 17.848098754882813, 18.259979248046875, 3.9226531982421875, 0.431488037109375, 26.321044921875, 7.35498046875],
//     [10.748092651367188, 15.121856689453125, 2.3143768310546875, 5.5897979736328125, -6.5116119384765625, -1.4709930419921875, 5.53094482421875, -5.6486358642578125, -5.040618896484375, 11.238418579101563, 15.10223388671875, 0.11767578125, 1.3533172607421875, 25.850326538085938, 6.60968017578125, 8.472946166992188, 17.024337768554688, 5.5701751708984375, 10.336212158203125, 2.96160888671875, -1.4906158447265625, 1.76519775390625, -9.532058715820313, -5.29559326171875, 10.846160888671875, 8.649459838867188, 4.7071990966796875, 8.061065673828125, 26.987899780273438, 10.31658935546875],
//     [9.179031372070313, 12.003341674804688, 2.8047027587890625, 9.218246459960938, -3.275421142578125, -3.5500030517578125, 8.119903564453125, -2.392822265625, -4.922943115234375, 10.296981811523438, 22.712203979492188, 4.27569580078125, 1.2944793701171875, 22.927947998046875, 6.49200439453125, 9.022125244140625, 11.944503784179688, 3.5303955078125, 8.94366455078125, -1.4906158447265625, -3.07928466796875, 2.8635406494140625, -8.296432495117188, -8.1983642578125, 17.808883666992188, 15.572967529296875, 0.4707183837890625, 3.216583251953125, 24.37933349609375, 7.11962890625],
//     [3.726531982421875, 25.69342041015625, 8.061065673828125, 9.610519409179688, 16.828216552734375, 0.196136474609375, 10.846160888671875, 4.020721435546875, -2.9223785400390625, 0.254974365234375, -8.786758422851563, -3.6873016357421875, 10.689254760742188, 5.1386871337890625, -0.7845306396484375, 9.68896484375, 18.377655029296875, 2.883148193359375, 4.295318603515625, 22.359161376953125, 0.2353668212890625, 9.787033081054688, 11.826812744140625, 1.94171142578125, 4.4522247314453125, -3.0596771240234375, -2.0594024658203125, 4.412994384765625, -4.3149261474609375, -6.3154754638671875]
// ]

// var walkData = [
//     [-3.216583251953125, 1.70635986328125, 8.394485473632813, -1.82403564453125, 0.74530029296875, 8.708297729492188, -2.1770782470703125, -1.4709930419921875, 13.84698486328125, 0.058837890625, 2.196685791015625, 11.356094360351563, -0.68646240234375, 0, 5.158294677734375, 6.060516357421875, -0.1569061279296875, -0.764923095703125, 11.15997314453125, 2.4124298095703125, 5.29559326171875, 9.551681518554688, 7.7668609619140625, 6.60968017578125, 7.315765380859375, 10.061630249023438, 6.5312347412109375, 11.27764892578125, 10.728469848632813, 9.139801025390625],
//     [12.611358642578125, 1.2356414794921875, 1.1571807861328125, 15.219924926757813, 7.74725341796875, 4.3149261474609375, 12.630966186523438, 9.649749755859375, 3.903045654296875, 14.415771484375, 11.630691528320313, 4.020721435546875, 16.867431640625, 6.864654541015625, 3.1185150146484375, 8.159133911132813, -2.137847900390625, 1.3729248046875, 3.275421142578125, -3.6088409423828125, -2.333984375, 5.3936614990234375, -1.76519775390625, -2.6870269775390625, 12.807479858398438, 2.8047027587890625, 0.706085205078125, 13.886215209960938, 8.669082641601563, 4.7660369873046875],
//     [1.70635986328125, -2.530120849609375, -0.254974365234375, 4.2560882568359375, -1.6082916259765625, -3.6284637451171875, 9.375152587890625, 2.137847900390625, 0.764923095703125, 15.4945068359375, 11.33648681640625, 3.8834381103515625, 7.35498046875, 12.552505493164063, 5.609405517578125, 4.3149261474609375, 10.277374267578125, 2.5693359375, 13.925445556640625, 12.395599365234375, 6.60968017578125, 14.847274780273438, 7.374603271484375, 3.1773529052734375, 5.17791748046875, -0.764923095703125, -0.56878662109375, 0.941436767578125, -2.7262420654296875, -2.0986175537109375],
//     [13.454727172851563, 11.591461181640625, 3.2361907958984375, 14.494232177734375, 7.3353729248046875, 1.9221038818359375, 7.2373046875, 0.0392303466796875, 0.5491790771484375, 3.2558135986328125, -2.3732147216796875, -2.1574554443359375, 6.805816650390625, -0.6472320556640625, -2.4124298095703125, 13.49395751953125, 5.5113372802734375, 0.56878662109375, 11.140350341796875, 7.0215606689453125, 1.3533172607421875, 9.806655883789063, 9.924331665039063, 9.610519409179688, 12.493667602539063, 11.238418579101563, 6.8254241943359375, 14.611907958984375, 8.865219116210938, 3.2361907958984375],
//     [2.0594024658203125, -1.1571807861328125, -0.706085205078125, 7.5118865966796875, 0.50994873046875, -2.020172119140625, 15.3179931640625, 4.4522247314453125, -0.2942047119140625, 13.592010498046875, 9.826263427734375, 8.786758422851563, 7.5118865966796875, 8.296432495117188, 6.0997314453125, 8.963272094726563, 8.414108276367188, 3.19696044921875, 14.494232177734375, 11.258041381835938, 5.550567626953125, 16.592849731445313, 6.9038848876953125, 2.020172119140625, 5.6878509521484375, -1.3729248046875, 1.2552490234375, 2.0397796630859375, -1.76519775390625, -0.8629913330078125],
//     [7.0215606689453125, 2.2947540283203125, 1.58868408203125, 10.846160888671875, 6.5704498291015625, 2.4124298095703125, 8.963272094726563, 10.179306030273438, 5.47210693359375, 6.119354248046875, 11.120742797851563, 4.21685791015625, 6.2762603759765625, 9.551681518554688, 4.844482421875, 13.238983154296875, 13.572402954101563, 0.7845306396484375, 14.062728881835938, 8.296432495117188, 4.6875762939453125, 8.119903564453125, 1.000274658203125, 2.90277099609375, 1.8436431884765625, -1.4121551513671875, 0, 4.1776275634765625, -1.2552490234375, -0.2942047119140625],
//     [4.864105224609375, 8.5513916015625, 4.55029296875, 10.296981811523438, 10.904998779296875, 6.864654541015625, 13.1605224609375, 8.335647583007813, 3.1773529052734375, 10.100845336914063, 2.2947540283203125, 3.4323272705078125, 6.7862091064453125, -0.2745819091796875, 1.1571807861328125, 2.1574554443359375, -1.5298309326171875, -0.9022064208984375, 8.571014404296875, 2.7458648681640625, 0.9610443115234375, 12.513290405273438, 6.43316650390625, 3.8049774169921875, 9.96356201171875, 8.610244750976563, 4.530670166015625, 5.785919189453125, 7.9041595458984375, 8.982894897460938]
// ]

// var jumpData = [
//     [0.1569061279296875, 5.9428253173828125, 8.904434204101563, 1.76519775390625, 5.6486358642578125, 9.355545043945313, 3.7461395263671875, 5.8251495361328125, 10.159683227539063, 3.451934814453125, 4.55029296875, 6.5312347412109375, 2.471282958984375, 5.844757080078125, 2.824310302734375, 2.275146484375, 4.471832275390625, 3.6284637451171875, 3.8049774169921875, 9.12017822265625, 9.492843627929688, -3.13812255859375, 0.0392303466796875, -2.21630859375, 6.7862091064453125, 11.003067016601563, 12.964385986328125, 12.65057373046875, 19.554458618164063, 17.416610717773438],
//     [-3.0008392333984375, 4.4326019287109375, 2.7458648681640625, -3.6284637451171875, 5.668243408203125, -1.686737060546875, -1.392547607421875, 2.333984375, -0.80413818359375, 0.2942047119140625, -1.902496337890625, -3.3734893798828125, 8.296432495117188, -0.176513671875, 7.374603271484375, 21.398117065429688, 38.245941162109375, 9.806655883789063, 6.629302978515625, 15.651412963867188, 0.8433685302734375, 1.4121551513671875, 5.8643798828125, 1.88287353515625, -1.76519775390625, 2.333984375, 0.0392303466796875, -4.09918212890625, -0.11767578125, -3.7069091796875],
//     [19.064132690429688, 16.867431640625, 10.5911865234375, 11.552230834960938, 21.535400390625, 7.4138336181640625, 7.668792724609375, 12.219085693359375, 3.5303955078125, 1.2944793701171875, 4.079559326171875, 2.2947540283203125, -0.823760986328125, 2.4320526123046875, -2.0594024658203125, -1.3729248046875, -0.137298583984375, -1.76519775390625, -1.1964111328125, -6.4527740478515625, 4.21685791015625, 21.417724609375, 26.477951049804688, 10.669631958007813, 9.806655883789063, 16.220199584960938, 0.5295562744140625, 9.00250244140625, 11.9052734375, 5.1190643310546875],
//     [-1.5494537353515625, -0.2942047119140625, -3.7657470703125, -1.0983428955078125, -5.3152008056640625, 0, 24.222427368164063, 25.418838500976563, 3.6088409423828125, 9.198638916015625, 26.458343505859375, 6.1389617919921875, 7.5315093994140625, 10.238143920898438, 7.1000213623046875, 0.5295562744140625, -0.9610443115234375, -0.6668548583984375, 0.5295562744140625, 1.4121551513671875, -2.0397796630859375, -2.0594024658203125, -1.6082916259765625, -1.569061279296875, 4.1384124755859375, -0.45111083984375, 5.4328765869140625, 18.024627685546875, 33.126861572265625, 13.2781982421875],
//     [0.431488037109375, 5.3152008056640625, 1.2160186767578125, -2.84393310546875, -9.45361328125, 3.157745361328125, 26.105300903320313, 27.3409423828125, 8.629852294921875, 9.885101318359375, 21.4765625, 4.079559326171875, 4.844482421875, 9.433990478515625, 4.354156494140625, 1.961334228515625, 4.5699005126953125, 1.0198974609375, -1.0787353515625, 1.902496337890625, -2.333984375, -3.275421142578125, -1.4121551513671875, -2.00054931640625, -1.2356414794921875, -11.983718872070313, 4.7660369873046875, 26.164138793945313, 33.42106628417969, 9.218246459960938],
//     [-2.255523681640625, 1.3140869140625, -3.9226531982421875, -1.4906158447265625, -8.178741455078125, -3.4127197265625, 22.398391723632813, 13.297821044921875, 13.78814697265625, 13.49395751953125, 32.34233093261719, 13.474334716796875, 6.9038848876953125, 10.08123779296875, 3.13812255859375, 2.3143768310546875, 5.23675537109375, 4.09918212890625, -0.431488037109375, 1.94171142578125, -1.4906158447265625, -2.333984375, -0.058837890625, -3.5500030517578125, -1.3533172607421875, -4.3149261474609375, -3.6480712890625, 18.769927978515625, 15.88677978515625, 12.572128295898438],
//     [-1.451385498046875, -4.922943115234375, -1.392547607421875, 20.947006225585938, 27.2232666015625, 3.451934814453125, 9.924331665039063, 26.752548217773438, 5.9428253173828125, 5.1190643310546875, 9.296707153320313, 2.4908905029296875, 0.9218292236328125, 4.8052520751953125, 2.2359161376953125, 1.0395050048828125, 5.4524993896484375, -0.0196075439453125, -1.3729248046875, 3.0008392333984375, -1.5298309326171875, -2.020172119140625, -2.333984375, -3.2558135986328125, 1.88287353515625, -9.139801025390625, 4.3737640380859375, 25.105026245117188, 34.656707763671875, 6.5704498291015625]
// ]


// $(document).ready(function () {
//     loadLines(runData, walkData, jumpData, true, true, true);
// });

function loadLines(run, walk, jump, showRun, showWalk, showJump) {
    var trainingData = []
    if (showRun)
        trainingData.push({ activity: run, color: 'red', name: "Run" });
    if (showWalk)
        trainingData.push({ activity: walk, color: 'green', name: "Walk" })
    if (showJump)
        trainingData.push({ activity: jump, color: 'blue', name: "Jump" })

    var allTraces = [];
    for (var a = 0; a < trainingData.length; a++) {
        var currentColor = trainingData[a].color;
        var currentActivity = trainingData[a].activity;
        var currentActivityName = trainingData[a].name;

        for (var r = 0; r < currentActivity.length; r++) {
            var recordX = []
            var recordY = []
            var recordZ = []
            var record = currentActivity[r];
            for (var p = 0; p < record.length; p++) {
                if (p % 3 == 0) {
                    recordX.push(record[p]);
                } else if (p % 3 == 1) {
                    recordY.push(record[p]);
                }
                else if (p % 3 == 2) {
                    recordZ.push(record[p])
                }
            }
           var hideLegend = true;
            if (r == 0)
                hideLegend = false;
            var currentTrace = {
                x: recordX,
                y: recordY,
                z: recordZ,
                mode: 'lines',
                marker: {
                    color: currentColor,
                    size: 12,
                    symbol: 'circle',
                    line: {
                        color: 'rgb(0,0,0)',
                        width: 0
                    }
                },
                line: {
                    color: currentColor,
                    width: 1
                },
                type: 'scatter3d',
                name: currentActivityName,
                showlegend: !hideLegend
            };
            allTraces.push(currentTrace);
        }
    }

    var layout = {
        title: '3D Line Plot',
        autosize: true,

        margin: {
            l: 0,
            r: 0,
            b: 0,
            t: 65
        },
        scene: {
            xaxis: { title: 'X AXIS (m/s^2)' },
            yaxis: { title: 'Y AXIS (m/s^2)' },
            zaxis: { title: 'Z AXIS (m/s^2)' },
        }
    };
    Plotly.newPlot('container', allTraces, layout, {displayModeBar: false});
}